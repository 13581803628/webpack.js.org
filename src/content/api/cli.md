---
title: 命令行接口
sort: 1
contributors:
  - anshumanv
  - evenstensberg
  - simon04
  - tbroadley
  - chenxsan
  - rencire
  - madhavarshney
  - EugeneHlushko
  - byzyk
  - wizardofhogwarts
  - EslamHiko
  - smelukov
  - anikethsaha
related:
  - title: 分析构建的统计数据
    url: https://survivejs.com/webpack/optimizing-build/analyzing-build-statistics/
  - title: 检查 webpack 包的三种简单方法
    url: https://medium.com/@joeclever/three-simple-ways-to-inspect-a-webpack-bundle-7f6a8fe7195d#.7d2i06mjx
  - title: 使用 webpack 优化应用程序包
    url: https://hackernoon.com/optimising-your-application-bundle-size-with-webpack-e85b00bab579#.5w5ko08pq
  - title: 分析和优化你的 webpack 包
    url: https://medium.com/@ahmedelgabri/analyzing-optimizing-your-webpack-bundle-8590818af4df#.hce4vdjs9
  - title: 使用 webpack 和 source-map-explorer 分析并减小 client-side 包
    url: https://medium.com/@nimgrg/analysing-and-minimising-the-size-of-client-side-bundle-with-webpack-and-source-map-explorer-41096559beca#.c3t2srr8x
---

为了更合适且方便地使用配置，可以在 `webpack.config.js` 中对 webpack 进行配置。CLI 中传入的任何参数会在配置文件中映射为对应的参数。

如果你还没有安装过 webpack 和 CLI，请先阅读 [安装指南](/guides/installation)。

## Commands

webpack-cli offers a variety of commands to make working with webpack easy. By default webpack ships with

| Command   | Alias | Description                                            |
| --------- | ----- | ------------------------------------------------------ |
| `init`    | c     | Initialize a new webpack configuration                 |
| `migrate` | m     | Migrate a configuration to a new version               |
| `loader`  | l     | Scaffold a loader repository                           |
| `plugin`  | p     | Scaffold a plugin repository                           |
| `info`    | i     | Outputs information about your system and dependencies |
| `serve`   | s     | Run the webpack Dev Server                             |

## Flags

webpack-cli offers a variety of commands to make working with webpack easy. By default webpack ships with the following flags:

Note: These are the flags with webpack v4, starting v5 CLI also supports [core flags](/api/cli/#core-flags)

| Flag / Alias        | Type            | Description                                                                                                    |
| ------------------- | --------------- | -------------------------------------------------------------------------------------------------------------- |
| `--entry`           | string[]        | The entry point(s) of your application e.g. `./src/main.js`                                                    |
| `--config, -c`      | string[]        | Provide path to a webpack configuration file e.g. `./webpack.config.js`                                        |
| `--config-name`     | string[]        | Name of the configuration to use                                                                               |
| `--name`            | string[]        | Name of the configuration. Used when loading multiple configurations                                           |
| `--color`           | boolean         | Enable colors on console                                                                                       |
| `--no-color`        | boolean         | Disables colors on console                                                                                     |
| `--merge, -m`       | boolean         | Merge two or more configurations using webpack-merge e.g. `-c ./webpack.config.js -c ./webpack.test.config.js` |
| `--env`             | string[]        | Environment passed to the configuration when it is a function                                                  |
| `--progress`        | boolean         | Print compilation progress during build                                                                        |
| `--help`            | boolean         | Outputs list of supported flags and commands                                                                   |
| `--output-path, -o` | string          | Output location of the file generated by webpack e.g. `./dist`                                                 |
| `--target, -t`      | string          | Sets the build target                                                                                          |
| `--watch, -w`       | boolean         | Watch for file changes                                                                                         |
| `--hot, -h`         | boolean         | Enables Hot Module Replacement                                                                                 |
| `--no-hot`          | boolean         | Disables Hot Module Replacement                                                                                |
| `--devtool, -d`     | string          | Controls if and how source maps are generated.                                                                 |
| `--prefetch`        | string          | Prefetch this request                                                                                          |
| `--json, -j`        | boolean, string | Prints result as JSON or store it in a file                                                                    |
| `--mode`            | string          | Defines the mode to pass to webpack                                                                            |
| `--version, -v`     | boolean         | Get current version                                                                                            |
| `--stats`           | boolean, string | It instructs webpack on how to treat the stats                                                                 |
| `--no-stats`        | boolean         | Disables stats output                                                                                          |
| `--analyze`         | boolean         | It invokes `webpack-bundle-analyzer` plugin to get bundle information                                          |

### Negated Flags

| Flag       | Description                                                   |
| ---------- | ------------------------------------------------------------- |
| --no-color | Disabled any color on the console                             |
| --no-hot   | Disabled hot reloading if you have it enabled via your config |
| --no-stats | Disables any compilation stats emitted by webpack             |

### Core Flags

Starting CLI v4 and webpack v5, CLI imports the entire configuration schema from webpack core to allow tuning almost every configuration option from the command line.

__Here's the list of all the core flags supported by webpack v5 with CLI v4 - [link](https://github.com/webpack/webpack-cli/tree/next/packages/webpack-cli#webpack-5)__

For example if you want to enable performance hints in your project you'd use [this](https://webpack.js.org/configuration/performance/#performancehints) option in configuration, with core flags you can do -

<<<<<<< HEAD
## 使用配置文件的用法 {#usage-with-configuration-file}
=======
```bash
webpack --performance-hints warning`
```

## Usage

### With configuration file
>>>>>>> 425606a70e1b0953a82a7f1218ff777198aec885

```bash
webpack [--config webpack.config.js]
```

配置文件中的相关选项，请参阅[配置](/configuration)。

### Without configuration file

<<<<<<< HEAD
## 不使用配置文件的用法 {#usage-without-configuration-file}
=======
```sh
webpack <entry> [<entry>] -o <output-path>
```

__example__
>>>>>>> 425606a70e1b0953a82a7f1218ff777198aec885

```sh
webpack --entry ./first.js --entry ./second.js --output-path /build
```

__`<entry>`__

构建项目时入口可以配置一个文件名或一组被命名过的文件名。你可以传递多个入口（每个入口在启动时加载）。如果传递一个形式为 `<name> = <request>` 的键值对，则可以创建一个额外的入口起点。它将被映射到配置选项（configuration option）的 `entry` 属性中。

__`<output>`__

<<<<<<< HEAD
用于存储构建后的文件路径以及文件名。它将映射到配置选项 `output.path` 和 `output.filename`。
=======
A path for the bundled file to be saved in. It will be mapped to the configuration options `output.path`.
>>>>>>> 425606a70e1b0953a82a7f1218ff777198aec885

__示例__

假设你的项目结构像下面这样：

```bash
.
├── dist
├── index.html
└── src
    ├── index.js
    ├── index2.js
    └── others.js
```

```bash
webpack ./src/index.js -o dist
```

<<<<<<< HEAD
这将对源码进行打包，其入口为 `index.js`，且 bundle 文件的输出路径为 `dist`，文件名为 `bundle.js`
=======
This will bundle your source code with entry as `index.js`, and the output bundle file will have a path of `dist`.
>>>>>>> 425606a70e1b0953a82a7f1218ff777198aec885

```bash
asset main.js 142 bytes [compared for emit] [minimized] (name: main)
./src/index.js 30 bytes [built] [code generated]
./src/others.js 1 bytes [built] [code generated]
webpack 5.1.0 compiled successfully in 187 ms
```

```bash
webpack ./src/index.js ./src/others2.js -o dist/
```

以多个入口的方式打包文件

```bash
asset main.js 142 bytes [compared for emit] [minimized] (name: main)
./src/index.js 30 bytes [built] [code generated]
./src/others2.js 1 bytes [built] [code generated]
./src/others.js 1 bytes [built] [code generated]
webpack 5.1.0 compiled successfully in 198 ms
```

## Default Configurations

CLI will look for some default configurations in the path of your project, here are the config files picked up by CLI.

If no `mode` is supplied via flags or config then this is the lookup order in increasing order

<<<<<<< HEAD
### 常用配置 {#common-options}
=======
> example - config file lookup will be in order of .webpack/webpack.config.development.js > webpack.config.development.js > webpack.config.js

```md
'webpack.config',
'webpack.config.dev',
'webpack.config.development',
'webpack.config.prod',
'webpack.config.production',
'.webpack/webpack.config',
'.webpack/webpack.config.none',
'.webpack/webpack.config.dev',
'.webpack/webpack.config.development',
'.webpack/webpack.config.prod',
'.webpack/webpack.config.production',
'.webpack/webpackfile',
```

If `mode` is supplied, say `production` then config looking order will be -

`.webpack/webpack.config.production.* > .webpack/webpack.config.prod.* > webpack.config.production.* > webpack.config.prod.* > webpack.config.*`

## Common Options
>>>>>>> 425606a70e1b0953a82a7f1218ff777198aec885

W> 注意，命令行接口（Command Line Interface）参数的优先级，高于配置文件参数。例如，如果将 [`--mode="production"`](/configuration/mode/#usage) 传入 webpack CLI，而配置文件使用的是 `development`，最终会使用 `production`。

<<<<<<< HEAD
__列出命令行所有可用的配置选项__
=======
__List all of the commands and flags available on the cli__
>>>>>>> 425606a70e1b0953a82a7f1218ff777198aec885

```bash
webpack --help
```

__Show help for a single command or flag__

```bash
webpack --help <command>
webpack --help --<flag>
```

__使用配置文件进行构建__

<<<<<<< HEAD
指定其它的[配置](/configuration)文件。配置文件默认为 `webpack.config.js`，如果你想使用其它配置文件，可以加入这个参数。
=======
Specifies a different [configuration](/configuration) file to pick up. Use this if you want to specify something different from `webpack.config.js`, which is one of the default.
>>>>>>> 425606a70e1b0953a82a7f1218ff777198aec885

```bash
webpack --config example.config.js
```

__以 JSON 格式输出 webpack 的运行结果__

```bash
webpack --json
```

<<<<<<< HEAD
在其他每个情况下，webpack 会打印一组统计信息，用于显示 bundle, chunk 和用时等详细信息。使用此选项，输出可以是 JSON 对象。此输出文件(response)可被 webpack 的[分析工具](https://webpack.github.com/analyse)、chrisbateman 的 [webpack 可视化工具](https://chrisbateman.github.io/webpack-visualizer/)或 th0r 的 [webpack bundle 分析工具](https://github.com/webpack-contrib/webpack-bundle-analyzer)接收后进行分析。分析工具将接收 JSON 并以图形形式提供构建的所有细节。

### 环境选项 {#environment-options}

当 webpack 配置对象[导出为一个函数](/configuration/configuration-types/#exporting-a-function)时，可以向其传入一个 "环境对象（environment）"。

```bash
webpack --env.production    # 设置 env.production == true
webpack --env.platform=web  # 设置 env.platform == "web"
```

`--env` 参数具有多种语法：

调用                                | 结果环境
---------------------------------------- | ---------------------------
`webpack --env prod`                     | `"prod"`
`webpack --env.prod`                     | `{ prod: true }`
`webpack --env.prod=1`                   | `{ prod: 1 }`
`webpack --env.prod=foo`                 | `{ prod: "foo" }`
`webpack --env.prod --env.min`           | `{ prod: true, min: true }`
`webpack --env.prod --env min`           | `[{ prod: true }, "min"]`
`webpack --env.prod=foo --env.prod=bar`  | `{prod: [ "foo", "bar" ]}`

T> 参阅[环境变量](/guides/environment-variables/)指南获取更多使用方法。

### 配置选项 {#configuration-options}

参数 | 说明 | 输入类型 | 默认值
------------------------- | ------------------------------------------- | ---------- | ------------------
`--config`                | 配置文件的路径 | string     | `webpack.config.js` 或 `webpackfile.js`
`--config-register, -r`   | 在 webpack 配置文件加载前先预加载一个或多个模块 | array |
`--config-name`           | 要使用的配置名称 | string |
`--env`                   | 当配置文件是一个函数时，会将环境变量传给这个函数 |
`--mode`                  | 用到的模式 | string | `'production'`

### 输出配置 {#output-options}

通过以下这些配置，你可以调整构建流程的某些[输出](/configuration/output/)参数。

参数 | 说明 | 输入类型 | 默认值
------------------------- | ------------------------------------------- | ---------- | ------------------
`--output-chunk-filename` | 输出的附带 chunk 的文件名   | string     | 含有 [id] 的文件名，而不是 [name] 或者 [id] 作为前缀
`--output-filename`       | 打包文件的文件名           | string     | `[name].js`
`--output-jsonp-function` | 加载 chunk 时使用的 JSONP 函数名 | string | `webpackJsonp`
`--output-library`        | 以库的形式导出入口文件 | string |
`--output-library-target` | 以库的形式导出入口文件时，输出的类型 | string | `var`
`--output-path`           | 输出的路径（在公共路径的基础上）      | string     | 当前目录
`--output-pathinfo`       | 加入一些依赖信息的注解 | boolean | `false`
`--output-public-path`    | 输出文件时使用的公共路径              | string     | `/`
`--output-source-map-filename` | 生成的 SourceMap 的文件名  | string     | `[name].map` 或者 `[outputFilename].map`
`--build-delimiter` | 在构建输出之后，显示的自定义文本 | string | 默认字符串是 null。你可以提供一个 `=== Build done ===` 这样的字符串


#### 示例用法 {#example-usage}
=======
__If you want to store stats as json instead of printing it, you can use -__

```bash
webpack --json stats.json
```

In every other case, webpack prints out a set of stats showing bundle, chunk and timing details. Using this option, the output can be a JSON object. This response is accepted by webpack's [analyse tool](https://webpack.github.io/analyse/), or chrisbateman's [webpack-visualizer](https://chrisbateman.github.io/webpack-visualizer/), or th0r's [webpack-bundle-analyzer](https://github.com/webpack-contrib/webpack-bundle-analyzer). The analyse tool will take in the JSON and provide all the details of the build in graphical form.

## Environment Options
>>>>>>> 425606a70e1b0953a82a7f1218ff777198aec885

When the webpack configuration [exports a function](/configuration/configuration-types/#exporting-a-function), an "environment" may be passed to it.

```bash
webpack --env production    # sets env.production == true
```

The `--env` argument accepts multiple values:

<<<<<<< HEAD
### Debug 配置 {#debug-options}

以下这些配置可以帮助你在 Webpack 编译过程中更好地 debug。

参数 | 说明 | 输入类型 | 默认值
------------ | ------------------------------------------------ | ---------- | -------------
`--debug`    | 把 loader 设置为 debug 模式 | boolean    | `false`
`--devtool`  | 为打包好的资源定义 [source map 的类型] | string | `-`
`--progress` | 打印出编译进度的百分比值 | boolean    | `false`
`--display-error-details` | 展示错误细节 | boolean | `false`

### 模块配置 {#module-options}

这些配置可以用于绑定 Webpack 允许的[模块](/configuration/module/)。

参数 | 说明 | 用法
-------------------- | ---------------------------------- | ----------------
`--module-bind`      | 为 loader 绑定一个文件扩展 | `--module-bind js=babel-loader`
`--module-bind-post` | 为 post loader 绑定一个文件扩展 |
`--module-bind-pre`  | 为 pre loader 绑定一个文件扩展 |


### Watch 选项 {#watch-options}

这些配置可以用于[观察](/configuration/watch/)依赖文件的变化，一旦有变化，则可以重新执行构建流程。

参数 | 说明
------------------------- | ----------------------
`--watch`, `-w`           | 观察文件系统的变化
`--watch-aggregate-timeout` | 指定一个毫秒数，在这个时间内，文件若发送了多次变化，会被合并
`--watch-poll`            | 轮询观察文件变化的时间间隔（同时会打开轮询机制）
`--watch-stdin`, `--stdin` | 当 stdin 关闭时，退出进程


### 性能优化配置 {#optimize-options}

在生产环境的构建时，这些配置可以用于调整 webpack 的一些性能相关的配置。

参数 | 说明 | 使用的插件
--------------------------- | -------------------------------------------------------|----------------------
`--optimize-max-chunks`     | 限制 chunk 的数量 | [LimitChunkCountPlugin](/plugins/limit-chunk-count-plugin/)
`--optimize-min-chunk-size` | 限制 chunk 的最小体积               | [MinChunkSizePlugin](/plugins/min-chunk-size-plugin/)
`--optimize-minimize`       | 压缩混淆 javascript，并且把 loader 设置为 minimizing | [TerserPlugin](/plugins/terser-webpack-plugin/)


### Resolve 配置 {#resolve-options}

这些配置可以用于设置 webpack [resolver](/configuration/resolve/) 时使用的别名（alias）和扩展名（extension）。

参数 | 说明 | 示例
---------------------- | ------------------------------------------------------- | -------------
`--resolve-alias`        | 指定模块的别名 | --resolve-alias jquery-plugin=jquery.plugin
`--resolve-extensions`   | 指定需要被处理的文件的扩展名 | --resolve-extensions .es6 .js .ts
`--resolve-loader-alias` | 最小化 JavaScript，并且将 loader 切换到最简 |


### 统计数据配置 {#stats-options}

以下选项用于配置 Webpack 在控制台输出的[统计数据](/configuration/stats/)，以及这些数据的样式。

参数 | 说明 | 类型
-------------------------------- | ------------------------------------------------------------------ | -------
`--color`, `--colors`            | 强制在控制台开启颜色 [默认：仅对 TTY 输出启用] | `boolean`
`--no-color`, `--no-colors`      | 强制在控制台关闭颜色 | `boolean`
`--display`                      | 选择[显示预设](/configuration/stats)(verbose - 繁琐, detailed - 细节, normal - 正常, minimal - 最小, errors-only - 仅错误, none - 无; 从 webpack 3.0.0 开始) | `string`
`--display-cached` | 在输出中显示缓存的模块 | `boolean`
`--display-cached-assets` | 在输出中显示缓存的 assets | `boolean`
`--display-chunks` | 在输出中显示 chunks | `boolean`
`--display-depth` | 显示从入口起点到每个模块的距离 | `boolean`
`--display-entrypoints`   | 在输出中显示入口文件 | `boolean`
`--display-error-details` | 显示详细的错误信息 | `boolean`
`--display-exclude`       | 在输出中显示被排除的文件 | `boolean`
`--display-max-modules`          | 设置输出中可见模块的最大数量 | `number`
`--display-modules` | 在输出中显示所有模块，包括被排除的模块 | `boolean`
`--display-optimization-bailout` | 作用域提升回退触发器（Scope hoisting fallback trigger）（从 webpack 3.0.0 开始） | `boolean`
`--display-origins` | 在输出中显示最初的 chunk | `boolean`
`--display-provided-exports`     | 显示有关从模块导出的信息 | `boolean`
`--display-reasons` | 显示模块包含在输出中的原因 | `boolean`
`--display-used-exports` | 显示模块中被使用的接口（Tree Shaking）| `boolean`
`--hide-modules` | 隐藏关于模块的信息 | `boolean`
`--sort-assets-by` | 对 assets 列表以某种属性排序 | `string`
`--sort-chunks-by`               | 对 chunks 列表以某种属性排序 | `string`
`--sort-modules-by`              | 对模块列表以某种属性排序 | `string`
`--verbose`                      | 显示更多信息 | `boolean`


### 高级配置 {#advanced-options}

参数 | 说明 | 用法
----------------- | ---------------------------------------- | -----
`--bail` | 一旦发生错误，立即终止 |
`--cache` | 开启缓存 [watch 时会默认打开] | `--cache=false`
`--define` | 定义 bundle 中的任意自由变量，查看 [shimming](/guides/shimming/) | `--define process.env.NODE_ENV="'development'"`
`--hot`           | 开启[模块热替换](/concepts/hot-module-replacement/) | `--hot=true`
`--labeled-modules` | 开启模块标签 [使用 LabeledModulesPlugin] |
`--live-reload`           | 开启实时重载 | `--live-reload=true`
`--plugin`        | 加载某个[插件](/configuration/plugins/) |
`--prefetch`      | 预加载某个文件 | `--prefetch=./files.js`
`--provide`       | 在所有模块中将这些模块提供为自由变量，查看 [shimming](/guides/shimming) | `--provide jQuery=jquery`
`--records-input-path` | 记录文件的路径（读取） |
`--records-output-path` | 记录文件的路径（写入） |
`--records-path`  | 记录文件的路径 |
`--target`        | [目标](/configuration/target/)的执行环境 | `--target='node'`

### 简写 {#shortcuts}

简写 | 含义
---------|----------------------------
-d       | `--debug --devtool cheap-module-eval-source-map --output-pathinfo`
-p       | `--mode production`，查阅[构建生产环境](/guides/production/)

### Profiling {#profiling}

`--profile` 选项捕获编译时每个步骤的时间信息，并且将这些信息包含在输出中。
=======
| Invocation                     | Resulting environment       |
| ------------------------------ | --------------------------- |
| `webpack --env prod`           | `{ prod: true }`            |
| `webpack --env prod --env min` | `{ prod: true, min: true }` |

T> See the [environment variables](/guides/environment-variables/) guide for more information on its usage.

## Configuration Options

| Parameter       | Explanation                                                    | Input type | Default                                             |
| --------------- | -------------------------------------------------------------- | ---------- | --------------------------------------------------- |
| `--config`      | Path to the configuration file                                 | string     | [Default Configs](/api/cli/#default-configurations) |
| `--config-name` | Name of the configuration to use                               | string     |
| `--env`         | Environment passed to the configuration, when it is a function |            |
| `--mode`        | Mode to use                                                    | string     | `'production'`                                      |

## Analyzing Bundle
>>>>>>> 425606a70e1b0953a82a7f1218ff777198aec885

You can also use `webpack-bundle-analyzer` to analyze your output bundles emitted by webpack. You can use `--analyze` flag to invoke it via CLI.

```sh
webpack --analyze
```

<<<<<<< HEAD
对于每个模块，输出中将根据具体情况包含以下信息：

- `factory`: 收集模块元数据的时间（如：解析文件名）
- `building`: 构建模块的时间（如：加载和解析）
- `dependencies`: 识别和连接模块依赖关系的时间

与 `--progress` 搭配使用，`--profile` 可以让你深入了解编译过程中哪一步需要多长时间。这可以帮助你以更明智的方式优化你的构建。

```bash
webpack --progress --profile

30ms building modules
1ms sealing
1ms optimizing
0ms basic module optimization
1ms module optimization
1ms advanced module optimization
0ms basic chunk optimization
0ms chunk optimization
1ms advanced chunk optimization
0ms module and chunk tree optimization
1ms module reviving
0ms module order optimization
1ms module id optimization
1ms chunk reviving
0ms chunk order optimization
1ms chunk id optimization
10ms hashing
0ms module assets processing
13ms chunk assets processing
1ms additional chunk assets processing
0ms recording
0ms additional asset processing
26ms chunk asset optimization
1ms asset optimization
6ms emitting
⋮
```
=======
W> Make sure you have `webpack-bundle-analyzer` installed in your project else CLI will prompt you to install it.
>>>>>>> 425606a70e1b0953a82a7f1218ff777198aec885

## 将 CLI 参数传递给 Node.js {#pass-cli-arguments-to-nodejs}

<<<<<<< HEAD
将参数直接传递给 Node.js 进程，你可以使用 `--node-args` 选项。所有其他的标志和选项将由 webpack-cli 接收。
=======
To pass arguments directly to Node.js process, you can use the `NODE_OPTIONS` option.
>>>>>>> 425606a70e1b0953a82a7f1218ff777198aec885

例如，将 Node.js 进程的内存限制增加到 4 GB。

```bash
NODE_OPTIONS="--max-old-space-size=4096" webpack
```

此外，你也可以将多个选项传递给 Node.js 进程。

```bash
NODE_OPTIONS="--max-old-space-size=4096 -r /path/to/preload/file.js" webpack
```
